var NativeDocument=function(t){"use strict";let n={};n={log(){},warn(){},error(){},disable(){}};var r=n;const o=function(){let e=0;const t=new Map;return{register(n){const r=++e;return t.set(r,new WeakRef(n)),r},unregister(e){t.delete(e)},getObservableById:e=>t.get(e)?.deref(),cleanup(){for(const[e,n]of t){const e=n.deref();e&&e.cleanup()}t.clear()},cleanObservables(e){if(t.size<e)return;let n=0;for(const[e,r]of t)r.deref()||(t.delete(e),n++);n>0&&r.log("Memory Auto Clean",`ðŸ§¹ Cleaned ${n} orphaned observables`)}}}();class s extends Error{constructor(e,t={}){super(e),this.name="NativeDocumentError",this.context=t,this.timestamp=(new Date).toISOString()}}function i(e,t){this.observable=e,this.checker=t,this.unSubscriptions=[]}i.prototype.__$isObservableChecker=!0,i.prototype.subscribe=function(e){const t=this.observable.subscribe(t=>{e&&e(this.checker(t))});return this.unSubscriptions.push(t),t},i.prototype.check=function(e){return this.observable.check(()=>e(this.val()))},i.prototype.val=function(){return this.checker&&this.checker(this.observable.val())},i.prototype.set=function(e){return this.observable.set(e)},i.prototype.trigger=function(){return this.observable.trigger()},i.prototype.cleanup=function(){return this.observable.cleanup()};const a=function(){const e=new Map,t=new Map;return{list:()=>t,add(n,r){if(!n||"object"!=typeof n)throw new Error(`Plugin ${r} must be an object`);if(!(r=r||n.name)||"string"!=typeof r)throw new Error("Please, provide a valid plugin name");if(!e.has(r)){n.$name=r,e.set(r,n),"function"==typeof n?.init&&n.init();for(const e in n)if(/^on[A-Z]/.test(e)){const r=e.replace(/^on/,"");t.has(r)||t.set(r,new Set),t.get(r).add(n)}}},remove(n){if(!e.has(n))return;const r=e.get(n);"function"==typeof r.cleanup&&r.cleanup();for(const[e,n]of t.entries())n.has(r)&&n.delete(r),0===n.size&&t.delete(e);e.delete(n)},emit(e,...n){if(!t.has(e))return;const o=t.get(e);for(const t of o){const o=t["on"+e];if("function"==typeof o)try{o.call(t,...n)}catch(n){r.error("Plugin Manager",`Error in plugin ${t.$name} for event ${e}`,n)}}}}}(),u=function(e,t){this.$target=t,this.$observer=e};u.prototype.__$isObservableWhen=!0,u.prototype.subscribe=function(e){return this.$observer.on(this.$target,e)},u.prototype.val=function(){return this.$observer.$currentValue===this.$target},u.prototype.isMath=function(){return this.$observer.$currentValue===this.$target},u.prototype.isActive=function(){return this.$observer.$currentValue===this.$target};const l=(e,t,n)=>{if(k.isFunction(n))return n(e,t);if(k.isObservable(e)){const r=e.val();return r&&n?r[n]:t}return k.isObject(e)?e[n]?.val?.()??e[n]??t:e},c=function(e,t){return e.replace(new RegExp(`^[${t}]+|[${t}]+$`,"g"),"")},h=(e,t)=>{if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(Array.isArray(e))return e.map(e=>h(e));if(k.isObservable(e))return t&&t(e),e;const n={};for(const t in e)e.hasOwnProperty(t)&&(n[t]=h(e[t]));return n};function p(e,t=null){this.$previousValue=null,this.$currentValue=e,this.$isCleanedUp=!1,this.$listeners=null,this.$watchers=null,this.$memoryId=null,t&&(this.configs=t,t.reset&&(this.$initialValue=k.isObject(e)?h(e):e)),a.emit("CreateObservable",this)}Object.defineProperty(p.prototype,"$value",{get(){return this.$currentValue},set(e){this.set(e)},configurable:!0}),p.prototype.__$isObservable=!0;const d={},f=function(){};p.prototype.triggerFirstListener=function(e){this.$listeners[0](this.$currentValue,this.$previousValue,e||{})},p.prototype.triggerListeners=function(e){const t=this.$listeners,n=this.$previousValue,r=this.$currentValue;e=e||d;for(let o=0,s=t.length;o<s;o++)t[o](r,n,e)};const b=function(e,t){"function"!=typeof e?e.set?e.set(t):e.forEach(e=>{e.set?e.set(t):e(t)}):e(t)};p.prototype.triggerWatchers=function(){if(!this.$watchers)return;const e=this.$watchers,t=this.$previousValue,n=this.$currentValue;if(e.has(n)){const t=e.get(n);b(t,!0)}if(e.has(t)){const n=e.get(t);b(n,!1)}},p.prototype.triggerAll=function(e){this.triggerListeners(e),this.triggerWatchers()},p.prototype.triggerWatchersAndFirstListener=function(e){this.triggerListeners(e),this.triggerWatchers()},p.prototype.assocTrigger=function(){this.$watchers?.size&&this.$listeners?.length?this.trigger=1===this.$listeners.length?this.triggerWatchersAndFirstListener:this.triggerAll:this.$listeners?.length?this.trigger=1===this.$listeners.length?this.triggerFirstListener:this.triggerListeners:this.$watchers?.size?this.trigger=this.triggerWatchers:this.trigger=f},p.prototype.trigger=f,p.prototype.set=function(e){const t="function"==typeof e?e(this.$currentValue):e;this.$currentValue!==t&&(this.$previousValue=this.$currentValue,this.$currentValue=t,a.emit("ObservableBeforeChange",this),this.trigger(),this.$previousValue=null,a.emit("ObservableAfterChange",this))},p.prototype.val=function(){return this.$currentValue},p.prototype.disconnectAll=function(){if(this.$listeners?.splice(0),this.$previousValue=null,this.$currentValue=null,this.$watchers)for(const[e,t]of this.$watchers)k.isArray(t)&&t.splice(0);this.$watchers?.clear(),this.$listeners=null,this.$watchers=null,this.trigger=f},p.prototype.cleanup=function(){o.unregister(this.$memoryId),this.disconnectAll(),this.$isCleanedUp=!0,delete this.$value},p.prototype.subscribe=function(e,t=null){if(this.$listeners=this.$listeners??[],this.$isCleanedUp)return r.warn("Observable subscription","âš ï¸ Attempted to subscribe to a cleaned up observable."),()=>{};if("function"!=typeof e)throw new s("Callback must be a function");return this.$listeners.push(e),this.assocTrigger(),a.emit("ObservableSubscribe",this,t),()=>{this.unsubscribe(e),this.assocTrigger(),a.emit("ObservableUnsubscribe",this)}},p.prototype.on=function(e,t){this.$watchers=this.$watchers??new Map;let n=this.$watchers.get(e);if(n){if(!k.isArray(n))return n=[n],void this.$watchers.set(e,n);n.push(t)}else this.$watchers.set(e,t);return this.assocTrigger(),()=>{const r=n.indexOf(t);n?.splice(r,1),1===n.size?this.$watchers.set(e,n[0]):0===n.size&&(this.$watchers?.delete(e),n=null),this.assocTrigger()}},p.prototype.unsubscribe=function(e){const t=this.$listeners.indexOf(e);t>-1&&this.$listeners.splice(t,1),this.assocTrigger()},p.prototype.check=function(e){return new i(this,e)},p.prototype.get=function(e){const t=this.$currentValue[e];return k.isObservable(t)?t.val():t},p.prototype.when=function(e){return new u(this,e)},p.prototype.toString=function(){return this.$memoryId||o.register(this),"{{#ObItem::("+this.$memoryId+")}}"},p.prototype.equals=function(e){return k.isObservable(e)?this.$currentValue===e.$currentValue:this.$currentValue===e},p.prototype.toBool=function(){return!!this.$currentValue},p.prototype.toggle=function(){this.set(!this.$currentValue)},p.prototype.reset=function(){if(!this.configs?.reset)return;const e=k.isObject(this.$initialValue)?h(this.$initialValue,e=>{e.reset()}):this.$initialValue;this.set(e)};const m={mounted:new WeakMap,mountedSupposedSize:0,unmounted:new WeakMap,unmountedSupposedSize:0,observer:null,checkMutation:function(e){for(const t of e){if(m.mountedSupposedSize>0)for(const e of t.addedNodes){const t=m.mounted.get(e);t&&(t.inDom=!0,t.mounted&&t.mounted(e))}if(m.unmountedSupposedSize>0)for(const e of t.removedNodes){const t=m.unmounted.get(e);t&&(t.inDom=!1,t.unmounted&&!0===t.unmounted(e)&&(t.disconnect(),e.nd?.remove()))}}},watch:function(e,t=!1){let n={inDom:t,mounted:null,unmounted:null,disconnect:()=>{m.mounted.delete(e),m.unmounted.delete(e),m.mountedSupposedSize--,m.unmountedSupposedSize--,n=null}};return{disconnect:n.disconnect,mounted:t=>{n.mounted=t,m.mounted.set(e,n),m.mountedSupposedSize++},unmounted:t=>{n.unmounted=t,m.unmounted.set(e,n),m.unmountedSupposedSize++}}}};m.observer=new MutationObserver(m.checkMutation),m.observer.observe(document.body,{childList:!0,subtree:!0});const g=["Click","DblClick","MouseDown","MouseEnter","MouseLeave","MouseMove","MouseOut","MouseOver","MouseUp","Wheel","KeyDown","KeyPress","KeyUp","Blur","Change","Focus","Input","Invalid","Reset","Search","Select","Submit","Drag","DragEnd","DragEnter","DragLeave","DragOver","DragStart","Drop","AfterPrint","BeforePrint","BeforeUnload","Error","HashChange","Load","Offline","Online","PageHide","PageShow","Resize","Scroll","Unload","Abort","CanPlay","CanPlayThrough","DurationChange","Emptied","Ended","LoadedData","LoadedMetadata","LoadStart","Pause","Play","Playing","Progress","RateChange","Seeked","Seeking","Stalled","Suspend","TimeUpdate","VolumeChange","Waiting","TouchCancel","TouchEnd","TouchMove","TouchStart","AnimationEnd","AnimationIteration","AnimationStart","TransitionEnd","Copy","Cut","Paste","FocusIn","FocusOut","ContextMenu"];function y(e){this.$element=e,this.$observer=null,a.emit("NDElementCreated",e,this)}y.prototype.__$isNDElement=!0,y.prototype.valueOf=function(){return this.$element},y.prototype.ref=function(e,t){return e[t]=this.$element,this},y.prototype.refSelf=function(e,t){return e[t]=this,this},y.prototype.unmountChildren=function(){let e=this.$element;for(let t=0,n=e.children.length;t<n;t++){let n=e.children[t];n.$ndProx||n.nd?.remove(),n=null}return e=null,this},y.prototype.remove=function(){let e=this.$element;return e.nd.unmountChildren(),e.$ndProx=null,delete e.nd?.on?.prevent,delete e.nd?.on,delete e.nd,e=null,this},y.prototype.lifecycle=function(e){return this.$observer=this.$observer||m.watch(this.$element),e.mounted&&this.$observer.mounted(e.mounted),e.unmounted&&this.$observer.unmounted(e.unmounted),this},y.prototype.mounted=function(e){return this.lifecycle({mounted:e})},y.prototype.unmounted=function(e){return this.lifecycle({unmounted:e})},y.prototype.htmlElement=function(){return this.$element},y.prototype.node=y.prototype.htmlElement,y.prototype.shadow=function(e,t=null){const n=this.$element,r=Array.from(n.childNodes),o=n.attachShadow({mode:e});if(t){const e=document.createElement("style");e.textContent=t,o.appendChild(e)}return n.append=o.append.bind(o),n.appendChild=o.appendChild.bind(o),o.append(...r),this},y.prototype.openShadow=function(e=null){return this.shadow("open",e)},y.prototype.closedShadow=function(e=null){return this.shadow("closed",e)},y.prototype.attach=function(e){return e.$hydrate(this.$element),this.$element};const v={},w=function(e,t,n){if(!e)return;if(!v[t]){const r=new WeakMap;return v[t]=r,void r.set(e,n)}const r=v[t];if(!r.has(e))return void r.set(e,n);const o=r.get(e);k.isArray(o)?o.push(n):r.set(e,[store[t],n])},$=function(e,t,n){return e.addEventListener(t,t=>{t.preventDefault(),n&&n.call(e,t)}),this},O=function(e,t,n){return e.addEventListener(t,t=>{t.stopPropagation(),n&&n.call(e,t)}),this},C=function(e,t,n){return e.addEventListener(t,t=>{t.stopPropagation(),t.preventDefault(),n&&n.call(e,t)}),this},S=function(e,t,n){return n?(e.addEventListener(t,n),this):(function(e,t){e.addEventListener(t,n=>{const r=v[t];if(!r)return;let o=n.target;for(;o&&o!==e;){const e=r.get(o);if(e){if(k.isFunction(e))e.call(o,n);else for(let t=0;t<e.length;t++)e[t].call(o,n);return}o=o.parentElement}})}(e,t),this)};for(const e of g){const t=e.toLowerCase();y.prototype["on"+e]=function(e){return this.$element.addEventListener(t,e),this},y.prototype["onPrevent"+e]=function(e){return $(this.$element,t,e),this},y.prototype["onStop"+e]=function(e){return O(this.$element,t,e),this},y.prototype["onPreventStop"+e]=function(e){return C(this.$element,t,e),this},y.prototype["when"+e]=function(e){return w(this.$element,t,e),this},y.prototype["capture"+e]=function(e){return S(this.$element,t,e),this}}y.prototype.with=function(e){if(!e||"object"!=typeof e)throw new s("extend() requires an object of methods");for(const t in e){const n=e[t];"function"==typeof n?this[t]=n.bind(this):console.warn(`âš ï¸ extends(): "${t}" is not a function, skipping`)}return this},y.extend=function(e){if(!e||"object"!=typeof e)throw new s("NDElement.extend() requires an object of methods");if(Array.isArray(e))throw new s("NDElement.extend() requires an object, not an array");const t=new Set(["constructor","valueOf","$element","$observer","ref","remove","cleanup","with","extend","attach","lifecycle","mounted","unmounted","unmountChildren"]);for(const n in e){if(!e.hasOwnProperty(n))continue;const o=e[n];if("function"==typeof o){if(t.has(n))throw r.error("NDElement.extend",`Cannot override protected method "${n}"`),new s(`Cannot override protected method "${n}"`);y.prototype[n]&&r.warn("NDElement.extend",`Overwriting existing prototype method "${n}"`),y.prototype[n]=o}else r.warn("NDElement.extend",`"${n}" is not a function, skipping`)}return a.emit("NDElementExtended",e),y};const E=1,A=3,x=8,N=11,k={isObservable:e=>e?.__$isObservable||e instanceof p||e instanceof i,isObservableWhenResult:e=>e&&(e.__$isObservableWhen||"object"==typeof e&&"$target"in e&&"$observer"in e),isArrayObservable:e=>e?.__$isObservableArray,isProxy:e=>e?.__isProxy__,isAnchor:e=>e?.__Anchor__,isObservableChecker:e=>e?.__$isObservableChecker||e instanceof i,isArray:e=>Array.isArray(e),isString:e=>"string"==typeof e,isNumber:e=>"number"==typeof e,isBoolean:e=>"boolean"==typeof e,isFunction:e=>"function"==typeof e,isAsyncFunction:e=>"function"==typeof e&&"AsyncFunction"===e.constructor.name,isObject:e=>"object"==typeof e&&null!==e,isJson:e=>"object"==typeof e&&null!==e&&!Array.isArray(e)&&"Object"===e.constructor.name,isElement:e=>e&&(e.nodeType===E||e.nodeType===A||e.nodeType===N||e.nodeType===x),isFragment:e=>e?.nodeType===N,isStringOrObservable(e){return this.isString(e)||this.isObservable(e)},isValidChild(e){return null===e||this.isElement(e)||this.isObservable(e)||this.isNDElement(e)||["string","number","boolean"].includes(typeof e)},isNDElement:e=>e?.__$isNDElement||e instanceof y,isValidChildren(e){Array.isArray(e)||(e=[e]);return 0===e.filter(e=>!this.isValidChild(e)).length},validateChildren(e){Array.isArray(e)||(e=[e]);const t=e.filter(e=>!this.isValidChild(e));if(t.length>0)throw new s(`Invalid children detected: ${t.map(e=>typeof e).join(", ")}`);return e},containsObservables:e=>!!e&&(k.isObject(e)&&Object.values(e).some(e=>k.isObservable(e))),containsObservableReference:e=>!(!e||"string"!=typeof e)&&/\{\{#ObItem::\([0-9]+\)\}\}/.test(e),validateAttributes(e){},validateEventCallback(e){if("function"!=typeof e)throw new s("Event callback must be a function")}};function I(e,t=!1){const n=document.createDocumentFragment();n.__Anchor__=!0;const o=document.createComment("Anchor Start : "+e),s=document.createComment("/ Anchor End "+e);n.appendChild(o),n.appendChild(s),n.nativeInsertBefore=n.insertBefore,n.nativeAppendChild=n.appendChild;const i=e=>t||e.firstChild===o&&e.lastChild===s;return n.appendElement=function(e,t=null){const r=o.parentNode,i=t||s;r!==n?r?.insertBefore(e,i):r.nativeInsertBefore(e,i)},n.appendChild=function(e,t=null){const o=s.parentNode;o?function(e,t,r){const o=k.isElement(t)?t:H.getChild(t);e!==n?i(e)&&r===s?e.append(o,r):e.insertBefore(o,r):e.nativeInsertBefore(o,r)}(o,e,t=t??s):r.error("Anchor","Anchor : parent not found",e)},n.append=function(...e){return n.appendChild(e)},n.removeChildren=function(){const e=s.parentNode;if(e===n)return;if(i(e))return void e.replaceChildren(o,s);let t,r=o.nextSibling;const a=document.createDocumentFragment();for(;r&&r!==s;)t=r.nextSibling,a.append(r),r=t;a.replaceChildren()},n.remove=function(){if(s.parentNode===n)return;let e,t=o.nextSibling;for(;t&&t!==s;)e=t.nextSibling,n.nativeAppendChild(t),t=e},n.removeWithAnchors=function(){n.removeChildren(),o.remove(),s.remove()},n.replaceContent=function(e){const t=s.parentNode;t&&(i(t)?t.replaceChildren(o,e,s):(n.removeChildren(),t.insertBefore(e,s)))},n.insertBefore=function(e,t=null){n.appendChild(e,t)},n.endElement=function(){return s},n.startElement=function(){return o},n.restore=function(){n.appendChild(n)},n.clear=n.remove,n.detach=n.remove,n.getByIndex=function(e){let t=o;for(let n=0;n<=e;n++){if(!t.nextSibling)return null;t=t.nextSibling}return t!==o?t:null},n}const P=["checked","selected","disabled","readonly","required","autofocus","multiple","autocomplete","hidden","contenteditable","spellcheck","translate","draggable","async","defer","autoplay","controls","loop","muted","download","reversed","open","default","formnovalidate","novalidate","scoped","itemscope","allowfullscreen","allowpaymentrequest","playsinline"];function T(e,t=null){return new p(e,t)}const D=T,F=T;function V(e,t,n){e.classes.toggle(t,n)}function j(e,t,n){e.style[t]=n}function R(e,t,n){k.isBoolean(n)?e[t]=n:e[t]=n===e.value}function _(e,t,n,r){k.isBoolean(n)?r.set(e[t]):r.set(e.value)}function M(e,t){for(let n in t){const r=t[n];k.isObservable(r)?(e.classes.toggle(n,r.val()),r.subscribe(V.bind(null,e,n))):k.isObservableWhenResult(r)?(e.classes.toggle(n,r.isMath()),r.subscribe(V.bind(null,e,n))):r.$hydrate?r.$hydrate(e,n):e.classes.toggle(n,r)}t=null}function L(e,t){for(let n in t){const r=t[n];k.isObservable(r)?(e.style[n]=r.val(),r.subscribe(j.bind(null,e,n))):e.style[n]=r}}function q(e,t,n){const r=k.isObservable(n)?n.val():n;k.isBoolean(r)?e[t]=r:e[t]=r===e.value,k.isObservable(n)&&(["checked"].includes(t)&&e.addEventListener("input",_.bind(null,e,t,r,n)),n.subscribe(R.bind(null,e,t)))}function B(e,t,n){const r=n=>{"value"!==t?e.setAttribute(t,n):e.value=n};r(n.val()),n.subscribe(r),"value"===t&&e.addEventListener("input",()=>n.set(e.value))}T.useValueProperty=function(e="value"){Object.defineProperty(p.prototype,e,{get(){return this.$currentValue},set(e){this.set(e)},configurable:!0})},T.getById=function(e){const t=o.getObservableById(parseInt(e));if(!t)throw new s("Observable.getById : No observable found with id "+e);return t},T.cleanup=function(e){e.cleanup()},T.autoCleanup=function(e=!1,t={}){if(!e)return;const{interval:n=6e4,threshold:r=100}=t;window.addEventListener("beforeunload",()=>{o.cleanup()}),setInterval(()=>o.cleanObservables(r),n)};const W=new Map;let z=null;const H={createTextNode:()=>(z||(z=document.createTextNode("")),z.cloneNode()),createObservableNode(e,t){const n=H.createTextNode();return t.subscribe(e=>n.nodeValue=e),n.nodeValue=t.val(),e&&e.appendChild(n),n},createHydratableNode(e,t){const n=H.createTextNode();return t.$hydrate(n),n},createStaticTextNode(e,t){let n=H.createTextNode();return n.nodeValue=t,e&&e.appendChild(n),n},createElement(e){if(e){if(W.has(e))return W.get(e).cloneNode();const t=document.createElement(e);return W.set(e,t),t.cloneNode()}return new I("Fragment")},processChildren(e,t){if(null!==e){if(a.emit("BeforeProcessChildren",t),Array.isArray(e))for(let n=0,r=e.length;n<r;n++){let r=this.getChild(e[n]);null!==r&&t.appendChild(r)}else{let n=this.getChild(e);n&&t.appendChild(n)}a.emit("AfterProcessChildren",t)}},getChild(e){if(null===e)return null;if(k.isString(e)&&(e=e.resolveObservableTemplate?e.resolveObservableTemplate():e,k.isString(e)))return H.createStaticTextNode(null,e);if(k.isElement(e))return e;if(k.isObservable(e))return H.createObservableNode(null,e);if(k.isNDElement(e))return e.$element??e.$build?.()??null;if(k.$element)return k.$element;if(k.isArray(e)){const t=document.createDocumentFragment();for(let n=0,r=e.length;n<r;n++)t.appendChild(this.getChild(e[n]));return t}return k.isFunction(e)?(a.emit("BeforeProcessComponent",e),this.getChild(e())):e?.$hydrate?H.createHydratableNode(null,e):H.createStaticTextNode(null,e)},processAttributes(e,t){k.isFragment(e)||t&&function(e,t){if(k.validateAttributes(t),!k.isObject(t))throw new s("Attributes must be an object");for(let n in t){const r=n.toLowerCase();let o=t[r];if(null!=o){if(k.isString(o)){if(o=o.resolveObservableTemplate?o.resolveObservableTemplate():o,k.isString(o)){e.setAttribute(r,o);continue}const t=o.filter(e=>k.isObservable(e));o=T.computed(()=>o.map(e=>k.isObservable(e)?e.val():e).join(" ")||" ",t)}"class"===r&&k.isObject(o)?M(e,o):"style"===r&&k.isObject(o)?L(e,o):P.includes(r)?q(e,r,o):k.isObservable(o)?B(e,r,o):o.$hydrate?o.$hydrate(e,r):e.setAttribute(r,o)}}}(e,t)},setup:(e,t,n)=>(a.emit("Setup",e,t,n),e)},U={configurable:!0,get(){return new y(this)}};Object.defineProperty(HTMLElement.prototype,"nd",U),Object.defineProperty(DocumentFragment.prototype,"nd",U),Object.defineProperty(y.prototype,"nd",{configurable:!0,get:function(){return this}});const K={getClasses(){return this.$element.className?.split(" ").filter(Boolean)},add(e){const t=this.getClasses();t.indexOf(e)>=0||(t.push(e),this.$element.className=t.join(" "))},remove(e){const t=this.getClasses(),n=t.indexOf(e);n<0||(t.splice(n,1),this.$element.className=t.join(" "))},toggle(e,t=void 0){const n=this.getClasses(),r=n.indexOf(e);if(r>=0){if(!0===t)return;n.splice(r,1)}else{if(!1===t)return;n.push(e)}this.$element.className=n.join(" ")},contains(e){return this.getClasses().indexOf(e)>=0}};Object.defineProperty(HTMLElement.prototype,"classes",{configurable:!0,get(){return{$element:this,...K}}});let J=e=>e;t.ArgTypes={},t.ArgTypes={string:()=>!0,number:()=>!0,boolean:()=>!0,observable:()=>!0,element:()=>!0,function:()=>!0,object:()=>!0,objectNotNull:()=>!0,children:()=>!0,attributes:()=>!0,optional:()=>!0,oneOf:()=>!0};const G=function(e,t=null){if(!k.isJson(e)||e?.$hydrate){const n=t;t=e,e=n}return{props:e,children:t}},Q=function(e){return k.isObservable(e)?H.createObservableNode(null,e):H.createStaticTextNode(null,e)};function Z(e,t,n,r=null){let{props:o,children:s=null}=G(n,r),i=H.createElement(e),a=t&&"function"==typeof t?t(i):i;return o&&H.processAttributes(a,o),s&&H.processChildren(s,a),H.setup(a,o,t)}function X(e,t){return Z.bind(null,e.toLowerCase(),t)}const Y=new WeakMap;function ee(e){let t=null,n=!1;const r=(e,t)=>{const n=Y.get(e);if(3===e.nodeType)return n&&n.value?n.value(t):e.cloneNode(!0);const o=e.cloneNode(e.fullCloneNode);if(n&&(((e,t,n)=>{let r=null;if(t.attributes){r=r||{};for(const e in t.attributes)r[e]=t.attributes[e](...n)}if(t.classes){r=r||{},r.class={};for(const e in t.classes)r.class[e]=t.classes[e](...n)}if(t.styles){r=r||{},r.style={};for(const e in t.styles)r.style[e]=t.styles[e](...n)}r&&H.processAttributes(e,r)})(o,n,t),function(e,t,n){if(!t.attach)return null;t.attach(e,...n)}(o,n,t)),e.fullCloneNode)return o;const s=e.childNodes;for(let e=0,n=s.length;e<n;e++){const n=s[e],i=r(n,t);o.appendChild(i)}return o};this.clone=o=>{if(!t&&(t=e(this),!n)){const e=t.cloneNode(!0);return e.fullCloneNode=!0,e}return n?r(t,o):t.cloneNode(!0)};const o=(e,t)=>({$hydrate:(r,o)=>{n=!0,function(e,t,n,r){Y.has(n)||Y.set(n,{});const o=Y.get(n);"value"!==t?"attach"!==t?(o[t]=o[t]||{},o[t][r]=e):o.attach=e:o.value=e}(e,t,r,o)}});this.style=e=>o(e,"styles"),this.class=e=>o(e,"classes"),this.property=e=>this.value(e),this.value=e=>o("function"!=typeof e?function(t){const n=t[0];return Q(n[e])}:function(t){return Q(e(...t))},"value"),this.attr=e=>o(e,"attributes"),this.attach=e=>o(e,"attach")}function te(e){let t=null,n=null;this.render=r=>{if(t||(t=e(this)),!n)return t;for(const e in n){(0,n[e])(...r)}return t},this.createSection=(e,t)=>{n=n||{};const r=new I("Component "+e);return n[e]=function(...e){r.removeChildren(),t?r.appendChild(t(...e)):r.append(e)},r}}Function.prototype.args=function(...e){return this},Function.prototype.cached=function(...e){let t,n=()=>t;return()=>(t||(t=this.apply(this,e),t.cloneNode?n=()=>t.cloneNode(!0):t.$element&&(n=()=>new y(t.$element.cloneNode(!0)))),n())},Function.prototype.errorBoundary=function(e){return(...t)=>{try{return this.apply(this,t)}catch(t){return e(t)}}},String.prototype.use=function(e){const t=this;return T.computed(()=>t.replace(/\$\{(.*?)}/g,(t,n)=>{const r=e[n];return k.isObservable(r)?r.val():r}),Object.values(e))},String.prototype.resolveObservableTemplate=function(){return k.containsObservableReference(this)?this.split(/(\{\{#ObItem::\([0-9]+\)\}\})/g).filter(Boolean).map(e=>{if(!k.containsObservableReference(e))return e;const[t,n]=e.match(/\{\{#ObItem::\(([0-9]+)\)\}\}/);return T.getById(n)}):this.valueOf()};const ne=e=>{let t=null;return new Proxy({},{get:(n,r)=>(null===t&&(t=e()),t[r])})},re=e=>{const t=new Map;return new Proxy({},{get:(n,r)=>{if(!t.has(r)){if(e.length>0)return(...n)=>{const o=e(...n);return t.set(r,o),o};t.set(r,e())}return t.get(r)}})},oe=function(e,t){if(!Array.isArray(e))throw new s("Observable.array : target must be an array");p.call(this,e,t),a.emit("CreateObservableArray",this)};(oe.prototype=Object.create(p.prototype)).__$isObservableArray=!0,["push","pop","shift","unshift","reverse","sort","splice"].forEach(e=>{oe.prototype[e]=function(...t){const n=this.$currentValue[e](...t);return this.trigger({action:e,args:t,result:n}),n}}),["map","forEach","filter","reduce","some","every","find","findIndex","concat","includes","indexOf"].forEach(e=>{oe.prototype[e]=function(...t){return this.$currentValue[e](...t)}}),oe.prototype.clear=function(){return this.$currentValue.length=0,this.trigger({action:"clear"}),!0},oe.prototype.at=function(e){return this.$currentValue[e]},oe.prototype.merge=function(e){this.$currentValue.push(...e),this.trigger({action:"merge",args:e})},oe.prototype.count=function(e){let t=0;return this.$currentValue.forEach((n,r)=>{e(n,r)&&t++}),t},oe.prototype.length=function(){return this.$currentValue.length},oe.prototype.swap=function(e,t){const n=this.$currentValue,r=n.length;if(r<e||r<t)return!1;if(t<e){const n=e;e=t,t=n}const o=n[e],s=n[t];return n[e]=s,n[t]=o,this.trigger({action:"swap",args:[e,t],result:[o,s]}),!0},oe.prototype.remove=function(e){const t=this.$currentValue.splice(e,1);return 0===t.length?[]:(this.trigger({action:"remove",args:[e],result:t[0]}),t)},oe.prototype.removeItem=function(e){const t=this.$currentValue.indexOf(e);return this.remove(t)},oe.prototype.isEmpty=function(){return 0===this.$currentValue.length},oe.prototype.populateAndRender=function(e,t){this.trigger({action:"populate",args:[this.$currentValue,e,t]})},T.array=function(e,t=null){return new oe(e,t)},T.batch=function(e){const t=T(0),n=function(){if(k.isAsyncFunction(e))return e(...arguments).then(()=>{t.trigger()}).catch(e=>{throw e});e(...arguments),t.trigger()};return n.$observer=t,n};T.init=function(e,t=null){const n={};for(const r in e){const o=e[r];if(Array.isArray(o)){if(!1!==t?.deep){const e=o.map(e=>k.isJson(e)?T.json(e,t):k.isArray(e)?T.array(e,t):T(e,t));n[r]=T.array(e,t);continue}n[r]=T.array(o,t)}else k.isObservable(o)||k.isProxy(o)?n[r]=o:n[r]=T(o,t)}const r=()=>{for(const e in n){n[e].reset()}},o=()=>function(e){const t={};for(const n in e){const r=e[n];if(k.isObservable(r)){let e=r.val();Array.isArray(e)&&(e=e.map(e=>k.isObservable(e)?e.val():k.isProxy(e)?e.$value:e)),t[n]=e}else k.isProxy(r)?t[n]=r.$value:t[n]=r}return t}(n),s=()=>T.init(o(),t),i=e=>{T.update(u,e)},a=e=>function(e,t){const n=e[t];return k.isObservable(n)?n.val():k.isProxy(n)?n.$value:n}(n,e),u=new Proxy(n,{get:(n,u)=>"__isProxy__"===u||("$value"===u?o():"get"===u||"$get"===u?a:"val"===u||"$val"===u?o:"set"===u||"$set"===u||"$updateWith"===u?i:"observables"===u||"$observables"===u?Object.values(n):"keys"===u||"$keys"===u?Object.keys(e):"clone"===u||"$clone"===u?s:"reset"===u?r:"configs"===u?t:n[u]),set:(e,t,n)=>void 0===e[t]||(k.isObservable(n)?e[t].set(n.val()):e[t].set(n),!0)});return u},T.arrayOfObject=function(e){return e.map(e=>T.object(e))},T.value=function(e){if(k.isObservable(e))return e.val();if(k.isProxy(e))return e.$value;if(k.isArray(e)){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(T.value(r))}return t}return e},T.update=function(e,t){const n=k.isProxy(t)?t.$value:t,r=e.configs;for(const o in n){const s=e[o],i=t[o],a=n[o];if(k.isObservable(s)){if(k.isArray(a)){const e=i.at(0);if(k.isObservable(e)||k.isProxy(e)){const t=a.map(t=>k.isProxy(e)?T.init(t,r):T(t,r));s.set(t);continue}s.set([...a]);continue}s.set(a)}else k.isProxy(s)?T.update(s,a):e[o]=a}},T.object=T.init,T.json=T.init,T.computed=function(e,t=[]){const n=new p(e()),r=()=>n.set(e());if(a.emit("CreateObservableComputed",n,t),k.isFunction(t)){if(!k.isObservable(t.$observer))throw new s("Observable.computed : dependencies must be valid batch function");return t.$observer.subscribe(r),n}return t.forEach(e=>{k.isProxy(e)?e.$observables.forEach(e=>{e.subscribe(r)}):e.subscribe(r)}),n};const se=function(){const e=new Map;return{use(t){const{observer:n,subscribers:r}=e.get(t),o=T(n.val()),s=n.subscribe(e=>o.set(e)),i=o.subscribe(e=>n.set(e));return o.destroy=()=>{s(),i(),o.cleanup()},r.add(o),o},follow(e){return this.use(e)},create(t,n){const r=T(n);return e.set(t,{observer:r,subscribers:new Set}),r},get(t){const n=e.get(t);return n?n.observer:null},getWithSubscribers:t=>e.get(t),delete(t){const n=e.get(t);n&&(n.observer.cleanup(),n.subscribers.forEach(e=>e.destroy()),n.observer.clear())}}}();const ie=function(e,t,{comment:n=null,shouldKeepInCache:o=!0}={}){if(!k.isObservable(e)&&!k.isObservableWhenResult(e))return r.warn("ShowIf","ShowIf : condition must be an Observable / "+n,e);const s=new I("Show if : "+(n||""));let i=null;const a=()=>(i&&o||(i=H.getChild(t),k.isFragment(i)&&(i=Array.from(i.childNodes))),i);return e.val()&&s.appendChild(a()),e.subscribe(e=>{e?s.appendChild(a()):s.remove()}),s},ae=function(e,t,n=!0){if(!k.isObservable(e))throw new s("Toggle : condition must be an Observable");const r=new I("Match"),o=new Map,i=function(e){if(n&&o.has(e))return o.get(e);let r=t[e];return r?(r=H.getChild(r),k.isFragment(r)&&(r=Array.from(r.children)),n&&o.set(e,r),r):null},a=e.val(),u=i(a);return u&&r.appendChild(u),e.subscribe(e=>{const t=i(e);r.remove(),t&&r.appendChild(t)}),r.nd.with({add(n,r,o=!1){t[n]=r,o&&e.set(n)},remove(e){n&&o.delete(e),delete t[e]}})},ue=function(e,t,n){if(!k.isObservable(e))throw new s("Toggle : condition must be an Observable");return ae(e,{true:t,false:n})},le=X("div"),ce=X("span"),he=X("label"),pe=X("p"),de=pe,fe=X("strong"),be=X("h1"),me=X("h2"),ge=X("h3"),ye=X("h4"),ve=X("h5"),we=X("h6"),$e=X("br"),Oe=X("a"),Ce=X("pre"),Se=X("code"),Ee=X("blockquote"),Ae=X("hr"),xe=X("em"),Ne=X("small"),ke=X("mark"),Ie=X("del"),Pe=X("ins"),Te=X("sub"),De=X("sup"),Fe=X("abbr"),Ve=X("cite"),je=X("q"),Re=X("dl"),_e=X("dt"),Me=X("dd"),Le=X("form",function(e){return e.submit=function(t){return"function"==typeof t?(e.onSubmit(e=>{e.preventDefault(),t(e)}),e):(this.setAttribute("action",t),e)},e.multipartFormData=function(){return this.setAttribute("enctype","multipart/form-data"),e},e.post=function(t){return this.setAttribute("method","post"),this.setAttribute("action",t),e},e.get=function(e){this.setAttribute("method","get"),this.setAttribute("action",e)},e}),qe=X("input"),Be=X("textarea"),We=Be,ze=X("select"),He=X("fieldset"),Ue=X("option"),Ke=X("legend"),Je=X("datalist"),Ge=X("output"),Qe=X("progress"),Ze=X("meter"),Xe=X("button"),Ye=X("main"),et=X("section"),tt=X("article"),nt=X("aside"),rt=X("nav"),ot=X("figure"),st=X("figcaption"),it=X("header"),at=X("footer"),ut=X("img"),lt=function(e,t){return ut({src:e,...t})},ct=X("details"),ht=X("summary"),pt=X("dialog"),dt=X("menu"),ft=X("ol"),bt=X("ul"),mt=X("li"),gt=mt,yt=ft,vt=bt,wt=X("audio"),$t=X("video"),Ot=X("source"),Ct=X("track"),St=X("canvas"),Et=X("svg"),At=X("time"),xt=X("data"),Nt=X("address"),kt=X("kbd"),It=X("samp"),Pt=X("var"),Tt=X("wbr"),Dt=X("caption"),Ft=X("table"),Vt=X("thead"),jt=X("tfoot"),Rt=X("tbody"),_t=X("tr"),Mt=_t,Lt=X("th"),qt=Lt,Bt=Lt,Wt=X("td"),zt=Wt,Ht=X("");var Ut=Object.freeze({__proto__:null,Abbr:Fe,Address:Nt,Anchor:I,Article:tt,Aside:nt,AsyncImg:function(e,t,n,r){const o=k.isObservable(e)?e.val():e,i=lt(t||o,n),a=new Image;return a.onload=()=>{k.isFunction(r)&&r(null,i),i.src=k.isObservable(e)?e.val():e},a.onerror=()=>{k.isFunction(r)&&r(new s("Image not found"))},k.isObservable(e)&&e.subscribe(e=>{a.src=e}),a.src=o,i},Audio:wt,BaseImage:ut,Blockquote:Ee,Br:$e,Button:Xe,Canvas:St,Caption:Dt,Checkbox:e=>qe({type:"checkbox",...e}),Cite:Ve,Code:Se,ColorInput:e=>qe({type:"color",...e}),Data:xt,Datalist:Je,DateInput:e=>qe({type:"date",...e}),DateTimeInput:e=>qe({type:"datetime-local",...e}),Dd:Me,Del:Ie,Details:ct,Dialog:pt,Div:le,Dl:Re,Dt:_e,Em:xe,EmailInput:e=>qe({type:"email",...e}),FieldSet:He,FigCaption:st,Figure:ot,FileInput:e=>qe({type:"file",...e}),Footer:at,ForEach:function(e,t,n,{shouldKeepItemsInCache:o=!1}={}){const i=new I("ForEach"),a=i.endElement();i.startElement();let u=new Map,c=null;const h=new Set,p=e=>{if(!o)for(const[t,n]of u.entries()){if(h.has(t))continue;const r=n.child?.deref();e&&r&&e.removeChild(r),n.indexObserver?.cleanup(),n.child=null,n.indexObserver=null,u.delete(n.keyId),c&&c.delete(n.keyId)}},d=(e,o)=>{const i=l(e,o,n);if(u.has(i)){const e=u.get(i);if(e.indexObserver?.set(o),e.isNew=!1,e.child?.deref())return i;u.delete(i)}try{const n=t.length>=2?T(o):null;let r=H.getChild(t(e,n));if(!r||k.isFragment(r))throw new s("ForEachArray child can't be null or undefined!");u.set(i,{keyId:i,isNew:!0,child:new WeakRef(r),indexObserver:n})}catch(e){throw r.error("ForEach",`Error creating element for key ${i}`,e),e}return i},f=()=>{const t=a.parentNode;if(!t)return;const n=k.isObservable(e)?e.val():e;if(h.clear(),Array.isArray(n))for(let e=0,t=n.length;e<t;e++){const t=d(n[e],e);h.add(t)}else for(const e in n){const t=d(n[e],e);h.add(t)}if(0===h.size)return i.removeChildren(),p(),void c?.clear();p(t),c&&0!==c.size?(()=>{let e=document.createDocumentFragment();const t=Array.from(h);Array.from(c);for(const n in t){const r=t[n],o=u.get(r);if(!o)continue;const s=o.child.deref();s&&e.appendChild(s)}i.replaceContent(e)})():(e=>{const t=document.createDocumentFragment();for(const e of h){const n=u.get(e);if(!n)continue;const r=n.child?.deref();r&&t.appendChild(r)}e.insertBefore(t,a)})(t),c?.clear(),c=new Set([...h])};return f(),k.isObservable(e)&&e.subscribe(f),i},ForEachArray:function(e,t,n,r={}){const o=new I("ForEach Array"),i=o.endElement(),a=o.startElement();let u=new Map,c=0;const h=t.length>=2,p=new WeakMap,d=()=>{o.removeChildren(),g(),c=0},f=(e,t)=>p.has(e)?p.get(e):l(e,t,n),b=e=>v(f(e)),m=(e,t=!0)=>{if(e){if(t){const t=e.child;t?.remove(),u.delete(e.keyId)}e.indexObserver?.deref()?.cleanup()}},g=()=>{if(!r.shouldKeepItemsInCache)if(h){for(const[e,t]of u.entries())m(t,!1);u.clear()}else u.clear()},y=(e,n)=>{const r=f(e,n);if(u.has(r)){const e=u.get(r);e.indexObserver?.deref()?.set(n);const t=e.child;if(t)return t;u.delete(r)}const o=h?T(n):null;let i=H.getChild(t(e,o));if(!i||k.isFragment(i))throw new s("ForEachArray child can't be null or undefined!");return u.set(r,{keyId:r,child:i,indexObserver:o?new WeakRef(o):null}),p.set(e,r),i},v=function(e){const t=u.get(e);if(!t)return null;const n=t.child;return n||(m(t,!1),null)},w=function(e,t){const n=u.get(e);if(!n)return null;const r=n.child;if(!r)return null;t?t.appendChild(r):r.remove()},$={toFragment(e,t=0){const n=document.createDocumentFragment();for(let t=0,r=e.length;t<r;t++)n.appendChild(y(e[t],c)),c++;return n},add(e,t=2){const n=$.toFragment(e);setTimeout(()=>{o.appendElement(n)},t)},replace(e){d(),$.add(e)},reOrder(e){let t=null;const n=document.createDocumentFragment();for(const r of e)t=b(r),t&&n.appendChild(t);t=null,o.appendElement(n,i)},removeOne(e,t){((e,t=!0)=>{m(u.get(e),t)})(f(e,t),!0)},clear:d,merge(e){$.add(e)},push(e){let t=0;r.pushDelay&&(t=r.pushDelay(e)??0),$.add(e,t)},populate([e,t,n]){const r=document.createDocumentFragment();for(let o=0;o<t;o++){const t=n(o);e.push(t),r.append(y(t,o)),c++}o.appendChild(r),r.replaceChildren()},unshift(e){o.insertBefore($.toFragment(e),a.nextSibling)},splice(e,t){const[n,r,...s]=e;let a=null;const u=document.createDocumentFragment();if(t.length>0){let e=f(t[0],n);if(1===t.length)w(e,u);else if(t.length>1){const r=v(e);a=r?.previousSibling;for(let e=0;e<t.length;e++){const r=f(t[e],n+e);w(r,u)}}}else a=i;u.replaceChildren(),s&&s.length&&a&&o.insertBefore($.toFragment(s),a.nextSibling)},reverse(e,t){$.reOrder(t)},sort(e,t){$.reOrder(t)},remove(e,t){$.removeOne(t)},pop(e,t){$.removeOne(t)},shift(e,t){$.removeOne(t)},swap(e,t){const n=i.parentNode;let r=b(t[0]),o=b(t[1]);if(!r||!o)return;const s=o.nextSibling;n.insertBefore(o,r),n.insertBefore(r,s),r=null,o=null}},O=(e,t,n)=>{if("clear"!==n.action&&e.length){if(n?.action)$[n.action]&&$[n.action](n.args,n.result);else{if(0===c)return void $.add(e);$.replace(e)}((e,t=0)=>{if(!h)return;let n=t;for(let r=t,o=e?.length;r<o;r++){const t=u.get(f(e[r],r));t&&(t.indexObserver?.deref()?.set(n),n++)}})(e,0)}else{if(0===c)return;d()}};return e.val().length&&O(e.val(),0,{action:null}),k.isObservable(e)&&e.subscribe(O),o},Form:Le,Fragment:Ht,H1:be,H2:me,H3:ge,H4:ye,H5:ve,H6:we,Header:it,HiddenInput:e=>qe({type:"hidden",...e}),HideIf:function(e,t,n){const r=T(!e.val());return e.subscribe(e=>r.set(!e)),ie(r,t,n)},HideIfNot:function(e,t,n){return ie(e,t,n)},Hr:Ae,Img:lt,Input:qe,Ins:Pe,Kbd:kt,Label:he,LazyImg:function(e,t){return lt(e,{...t,loading:"lazy"})},Legend:Ke,Li:gt,Link:Oe,ListItem:mt,Main:Ye,Mark:ke,Match:ae,Menu:dt,Meter:Ze,MonthInput:e=>qe({type:"month",...e}),NativeDocumentFragment:I,Nav:rt,NumberInput:e=>qe({type:"number",...e}),Ol:yt,Option:Ue,OrderedList:ft,Output:Ge,P:pe,Paragraph:de,PasswordInput:e=>qe({type:"password",...e}),Pre:Ce,Progress:Qe,Quote:je,Radio:e=>qe({type:"radio",...e}),RangeInput:e=>qe({type:"range",...e}),ReadonlyInput:e=>qe({readonly:!0,...e}),Samp:It,SearchInput:e=>qe({type:"search",...e}),Section:et,Select:ze,ShowIf:ie,ShowWhen:function(){if(2===arguments.length){const[e,t]=arguments;if(!k.isObservableWhenResult(e))throw new s("showWhen observer must be an ObservableWhenResult",{data:e,help:"Use observer.when(target) to create an ObservableWhenResult"});return ie(e,t)}if(3===arguments.length){const[e,t,n]=arguments;if(!k.isObservable(e))throw new s("showWhen observer must be an Observable",{data:e});return ie(e.when(t),n)}throw new s("showWhen must have 2 or 3 arguments",{data:["showWhen(observer, target, view)","showWhen(observerWhenResult, view)"]})},SimpleButton:(e,t)=>Xe(e,{type:"button",...t}),Small:Ne,Source:Ot,Span:ce,Strong:fe,Sub:Te,SubmitButton:(e,t)=>Xe(e,{type:"submit",...t}),Summary:ht,Sup:De,Svg:Et,Switch:ue,TBody:Rt,TBodyCell:zt,TFoot:jt,TFootCell:Bt,THead:Vt,THeadCell:qt,TRow:Mt,Table:Ft,Td:Wt,TelInput:e=>qe({type:"tel",...e}),TextArea:Be,TextInput:We,Th:Lt,Time:At,TimeInput:e=>qe({type:"time",...e}),Tr:_t,Track:Ct,Ul:vt,UnorderedList:bt,UrlInput:e=>qe({type:"url",...e}),Var:Pt,Video:$t,Wbr:Tt,WeekInput:e=>qe({type:"week",...e}),When:function(e){if(!k.isObservable(e))throw new s("When : condition must be an Observable");let t=null,n=null;return{show(e){return t=e,this},otherwise:r=>(n=r,ue(e,t,n))}},createPortal:function(e,{parent:t,name:n="unnamed"}={}){const r=I("Portal "+n);return r.appendChild(H.getChild(e)),(t||document.body).appendChild(r),r}});const Kt={};function Jt(e,t,n={}){e="/"+c(e,"/").replace(/\/+/,"/");let r=null,o=n.name||null;const s=n.middlewares||[],i=n.shouldRebuild||!1,a=n.with||{},u=n.layout||null,l={},h=[],p=e=>{if(!e)return null;const[t,n]=e.split(":");let r=a[t];return!r&&n&&(r=Kt[n]),r||(r="[^/]+"),r=r.replace("(","(?:"),{name:t,pattern:`(${r})`}},d=()=>{if(r)return r;const t=e.replace(/\{(.*?)}/gi,(e,t)=>{const n=p(t);return n&&n.pattern?(l[n.name]=n.pattern,h.push(n.name),n.pattern):e});return r=new RegExp("^"+t+"$"),r};this.name=()=>o,this.component=()=>t,this.middlewares=()=>s,this.shouldRebuild=()=>i,this.path=()=>e,this.layout=()=>u,this.match=function(e){e="/"+c(e,"/");if(!d().exec(e))return!1;const t={};return d().exec(e).forEach((e,n)=>{if(n<1)return;const r=h[n-1];t[r]=e}),t},this.url=function(t){const n=e.replace(/\{(.*?)}/gi,(e,n)=>{const r=p(n);if(t.params&&t.params[r.name])return t.params[r.name];throw new Error(`Missing parameter '${r.name}'`)}),r="object"==typeof t.query?new URLSearchParams(t.query).toString():null;return(t.basePath?t.basePath:"")+(r?`${n}?${r}`:n)}}class Gt extends Error{constructor(e,t){super(e),this.context=t}}const Qt=(e,t)=>{const n=[];return e.forEach(e=>{n.push(c(e.suffix,"/"))}),n.push(c(t,"/")),n.join("/")},Zt=(e,t)=>{const n=[];return e.forEach(e=>{e.options.middlewares&&n.push(...e.options.middlewares)}),t&&n.push(...t),n},Xt=(e,t)=>{const n=[];return e.forEach(e=>{e.options?.name&&n.push(e.options.name)}),t&&n.push(t),n.join(".")},Yt=e=>{for(let t=e.length-1;t>=0;t--)if(e[t]?.options?.layout)return e[t].options.layout;return null};function en(){const e=[];let t=0;const n=n=>{const o=t+n;if(!e[o])return;t=o;const{route:s,params:i,query:a,path:u}=e[o];r(u)},r=e=>{window.location.replace(`${window.location.pathname}${window.location.search}#${e}`)},o=()=>window.location.hash.slice(1);this.push=function(n){const{route:s,params:i,query:a,path:u}=this.resolve(n);u!==o()&&(e.splice(t+1),e.push({route:s,params:i,query:a,path:u}),t++,r(u))},this.replace=function(n){const{route:r,params:s,query:i,path:a}=this.resolve(n);a!==o()&&(e[t]={route:r,params:s,query:i,path:a})},this.forward=function(){return t<e.length-1&&n(1)},this.back=function(){return t>0&&n(-1)},this.init=function(n){window.addEventListener("hashchange",()=>{const{route:e,params:t,query:n,path:r}=this.resolve(o());this.handleRouteChange(e,t,n,r)});const{route:r,params:s,query:i,path:a}=this.resolve(n||o());e.push({route:r,params:s,query:i,path:a}),t=0,this.handleRouteChange(r,s,i,a)}}function tn(){this.push=function(e){try{const{route:t,path:n,params:r,query:o}=this.resolve(e);if(window.history.state&&window.history.state.path===n)return;window.history.pushState({name:t.name(),params:r,path:n},t.name()||n,n),this.handleRouteChange(t,r,o,n)}catch(e){r.error("HistoryRouter","Error in pushState",e)}},this.replace=function(e){const{route:t,path:n,params:o}=this.resolve(e);try{window.history.replaceState({name:t.name(),params:o,path:n},t.name()||n,n),this.handleRouteChange(t,o,{},n)}catch(e){r.error("HistoryRouter","Error in replaceState",e)}},this.forward=function(){window.history.forward()},this.back=function(){window.history.back()},this.init=function(e){window.addEventListener("popstate",e=>{try{if(!e.state||!e.state.path)return;const t=e.state.path,{route:n,params:r,query:o,path:s}=this.resolve(t);if(!n)return;this.handleRouteChange(n,r,o,s)}catch(e){r.error("HistoryRouter","Error in popstate event",e)}});const{route:t,params:n,query:o,path:s}=this.resolve(e||window.location.pathname+window.location.search);this.handleRouteChange(t,n,o,s)}}function nn(){const e=[];let t=0;const n=n=>{const r=t+n;if(!e[r])return;t=r;const{route:o,params:s,query:i,path:a}=e[r];this.handleRouteChange(o,s,i,a)};this.push=function(n){const{route:r,params:o,query:s,path:i}=this.resolve(n);e[t]&&e[t].path===i||(e.splice(t+1),e.push({route:r,params:o,query:s,path:i}),t++,this.handleRouteChange(r,o,s,i))},this.replace=function(n){const{route:r,params:o,query:s,path:i}=this.resolve(n);e[t]={route:r,params:o,query:s,path:i},this.handleRouteChange(r,o,s,i)},this.forward=function(){return t<e.length-1&&n(1)},this.back=function(){return t>0&&n(-1)},this.init=function(n){const r=n||window.location.pathname+window.location.search,{route:o,params:s,query:i,path:a}=this.resolve(r);e.push({route:o,params:s,query:i,path:a}),t=0,this.handleRouteChange(o,s,i,a)}}const rn="default";function on(e={}){const t=[],n={},o=[],s=[],i={route:null,params:null,query:null,path:null,hash:null};if("hash"===e.mode)en.apply(this,[]);else if("history"===e.mode)tn.apply(this,[]);else{if("memory"!==e.mode)throw new Gt("Invalid router mode "+e.mode);nn.apply(this,[])}const a=function(e,t){for(const n of s)try{n(e),t&&t(e)}catch(e){r.warn("Route Listener","Error in listener:",e)}};this.routes=()=>[...t],this.currentState=()=>({...i}),this.add=function(e,r,s){const i=new Jt(Qt(o,e),r,{...s,middlewares:Zt(o,s?.middlewares||[]),name:s?.name?Xt(o,s.name):null,layout:s?.layout||Yt(o)});return t.push(i),i.name()&&(n[i.name()]=i),this},this.group=function(e,t,n){if(!k.isFunction(n))throw new Gt("Callback must be a function");return o.push({suffix:e,options:t}),n(),o.pop(),this},this.generateUrl=function(e,t={},r={}){const o=n[e];if(!o)throw new Gt(`Route not found for name: ${e}`);return o.url({params:t,query:r})},this.resolve=function(e){if(k.isJson(e)){const t=n[e.name];if(!t)throw new Gt(`Route not found for name: ${e.name}`);return{route:t,params:e.params,query:e.query,path:t.url({...e})}}const[r,o]=e.split("?"),s="/"+c(r,"/");let i,a=null;for(const e of t)if(i=e.match(s),i){a=e;break}if(!a)throw new Gt(`Route not found for url: ${r}`);const u={};if(o){const e=new URLSearchParams(o).entries();for(const[t,n]of e)u[t]=n}return{route:a,params:i,query:u,path:e}},this.subscribe=function(e){if(!k.isFunction(e))throw new Gt("Listener must be a function");return s.push(e),()=>{s.splice(s.indexOf(e),1)}},this.handleRouteChange=function(e,t,n,r){i.route=e,i.params=t,i.query=n,i.path=r;const o=[...e.middlewares(),a];let s=0;const u={...i},l=e=>{if(s++,!(s>=o.length))return o[s](e||u,l)};return o[s](u,l)}}function sn(e,t){const{to:n,href:r,...o}=e,s=n||r;if(k.isString(s)){const e=on.get();return Oe({...o,href:s},t).nd.onPreventClick(()=>{e.push(s)})}const i=s.router||rn,a=on.get(i);if(!a)throw new Gt('Router not found "'+i+'" for link "'+s.name+'"');const u=a.generateUrl(s.name,s.params,s.query);return Oe({...o,href:u},t).nd.onPreventClick(()=>{a.push(u)})}on.routers={},on.create=function(t,n){if(!k.isFunction(n))throw r.error("Router","Callback must be a function",e),new Gt("Callback must be a function");const o=new on(t);return on.routers[t.name||rn]=o,n(o),o.init(t.entry),o.mount=function(e){if(k.isString(e)){const t=document.querySelector(e);if(!t)throw new Gt(`Container not found for selector: ${e}`);e=t}else if(!k.isElement(e))throw new Gt("Container must be a string or an Element");return function(e,t){const n=new Map,r=function(e,n){t.innerHTML="";const r=n.layout();r?t.appendChild(r(e)):t.appendChild(e)},o=function(e){if(!e.route)return;const{route:t,params:o,query:s,path:i}=e;if(n.has(i)){const e=n.get(i);return void r(e,t)}const a=t.component()({params:o,query:s});n.set(i,a),r(a,t)};return e.subscribe(o),o(e.currentState()),t}(o,e)},o},on.get=function(e){const t=on.routers[e||rn];if(!t)throw new Gt(`Router not found for name: ${e}`);return t},on.push=function(e,t=null){return on.get(t).push(e)},on.replace=function(e,t=null){return on.get(t).replace(e)},on.forward=function(e=null){return on.get(e).forward()},on.back=function(e=null){return on.get(e).back()},sn.blank=function(e,t){return Oe({...e,target:"_blank"},t)};var an=Object.freeze({__proto__:null,Link:sn,RouteParamPatterns:Kt,Router:on});const un={once:e=>ne(e),memoize:e=>re(e)};var ln=Object.freeze({__proto__:null,NativeFetch:function(e){const t={request:[],response:[]};this.interceptors={response:e=>{t.response.push(e)},request:e=>{t.request.push(e)}},this.fetch=async function(n,r,o={},s={}){if(s.formData){const e=new FormData;for(const t in o)e.append(t,o[t]);o=e}r.startsWith("http")||(r=(e.endsWith("/")?e:e+"/")+r);let i={method:n,headers:{...s.headers||{}}};o&&(o instanceof FormData?i.body=o:(i.headers["Content-Type"]="application/json","GET"!==n?i.body=JSON.stringify(o):i.params=o));for(const e of t.request)i=await e(i,r)||i;let a=await fetch(r,i);for(const e of t.response)a=await e(a,r)||a;const u=(a.headers.get("content-type")||"").includes("application/json")?await a.json():await a.text();if(!a.ok){const e=new Error(u?.message||a.statusText);throw e.status=a.status,e.data=u,e}return u},this.post=function(e,t={},n={}){return this.fetch("POST",e,t,n)},this.put=function(e,t={},n={}){return this.fetch("PUT",e,t,n)},this.delete=function(e,t={},n={}){return this.fetch("DELETE",e,t,n)},this.get=function(e,t={},n={}){return this.fetch("GET",e,t,n)}},Service:un});return t.$=D,t.ElementCreator=H,t.HtmlElementWrapper=X,t.NDElement=y,t.Observable=T,t.PluginsManager=a,t.SingletonView=te,t.Store=se,t.TemplateCloner=ee,t.Validator=k,t.autoMemoize=re,t.autoOnce=ne,t.classPropertyAccumulator=function(e=[]){let t=k.isString(e)?e.split(" ").filter(Boolean):e;const n=k.isArray(t);return{add(e,r=!0){n?t.push(e):t[e]=r},value:()=>n?t.join(" "):{...t}}},t.createTextNode=Q,t.cssPropertyAccumulator=function(e={}){let t=k.isString(e)?e.split(";").filter(Boolean):e;const n=k.isArray(t);return{add(e,r){n?t.push(e+" :  "+r):t[e]=r},value:()=>n?t.join(";").concat(";"):{...t}}},t.elements=Ut,t.memoize=e=>{const t=new Map;return(...n)=>{const[r,...o]=n;return t.has(r)||t.set(r,e(...o)),t.get(r)}},t.normalizeComponentArgs=G,t.obs=F,t.once=e=>{let t=null;return(...n)=>(null===t&&(t=e(...n)),t)},t.router=an,t.useCache=function(e){let t=null;const n=function(n){return t||(t=new ee(e)),t.clone(n)};return e.length<2?function(...e){return n(e)}:function(e,t,...r){return n([e,t,...r])}},t.useSingleton=function(e){let t=null;return function(...n){return t||(t=new te(e)),t.render(n)}},t.utils=ln,t.withValidation=J,t}({});
